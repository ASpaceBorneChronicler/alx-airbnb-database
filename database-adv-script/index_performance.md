
# Measuring Index Performance

This guide explains how to use SQL's `EXPLAIN` or `EXPLAIN ANALYZE` commands to measure and compare query performance. This is a crucial step to verify that the indexes you created are effectively speeding up your queries.

## The `EXPLAIN` Command

The `EXPLAIN` command shows the query execution plan generated by the database's query optimizer. It tells you **how** the database will execute a query, but it doesn't actually run it.

- `EXPLAIN`: Shows the planned execution steps.

- `EXPLAIN ANALYZE`: Shows the planned steps and executes the query to show the **actual** time and cost. This is the most effective way to measure performance.

## Step-by-Step Performance Measurement

Use the following process for each query you want to optimize.

### Step 1: Measure Performance Without Indexes

Before creating any new indexes, run your query with `EXPLAIN ANALYZE` to establish a baseline performance. The output will likely show that the database is performing a "Sequential Scan" on the tables involved, which is the slowest method.

**Example Query:**

Let's use the `LEFT JOIN` query that retrieves all properties and their reviews.

```
EXPLAIN ANALYZE
SELECT
    p.property_id,
    p.name AS property_name,
    r.review_id,
    r.rating,
    r.comment
FROM
    Property AS p
LEFT JOIN
    Review AS r ON p.property_id = r.property_id
ORDER BY
    p.property_id;

```

**Interpretation of Output:**

- Look for lines that mention `Seq Scan` (Sequential Scan). This indicates the database is reading the entire table, which is slow.

- Note the `actual time` and `cost` metrics to serve as your benchmark.

### Step 2: Create the Indexes

Now, you can create the indexes on the high-usage columns. This is where you would use the `CREATE INDEX` commands from your `database_index.sql` file.

```
-- Create the index on the foreign key column used in the JOIN
CREATE INDEX idx_review_property_id ON Review(property_id);

```

### Step 3: Measure Performance With Indexes

After the index has been created, run the same `EXPLAIN ANALYZE` query again.

```
EXPLAIN ANALYZE
SELECT
    p.property_id,
    p.name AS property_name,
    r.review_id,
    r.rating,
    r.comment
FROM
    Property AS p
LEFT JOIN
    Review AS r ON p.property_id = r.property_id
ORDER BY
    p.property_id;

```

**Interpretation of Output:**

- You should now see the `Seq Scan` replaced by an `Index Scan` or `Index-Only Scan`. This indicates the database is using the new index to find data much more efficiently.

- Compare the new `actual time` and `cost` to your baseline from Step 1. The numbers should be significantly lower, especially on a large dataset.

By following these steps, you can empirically prove the performance benefits of your indexing strategy and understand exactly how your database is executing your queries.
